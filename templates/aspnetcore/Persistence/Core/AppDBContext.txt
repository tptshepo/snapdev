using Microsoft.EntityFrameworkCore;
using {{package}}.Models;
using System.Linq;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.Extensions.Logging;

namespace {{package}}.Persistence
{
  public class AppDbContext : DbContext
  {
    public DbSet<{{titlecase}}> {{ptitlecase}} { get; set; }
    
    public AppDbContext(DbContextOptions<AppDbContext> options)
        : base(options)
    {
    }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
      foreach (var property in modelBuilder.Model.GetEntityTypes()
          .SelectMany(t => t.GetProperties())
          .Where(p => p.ClrType == typeof(decimal)))
      {
        property.Relational().ColumnType = "decimal(12, 2)";
      }
    }

  }
}
