import { {{titlecase}}ApiService } from './{{dashlcase}}.api.service';
import 'rxjs/add/operator/toPromise';

import {NgRedux} from '@angular-redux/store';
import {Injectable} from '@angular/core';
import {IAppState, rootReducer, INITIAL_STATE} from '../store';

@Injectable()
export class AppLoadService {
  constructor(
      private {{camelcase}}ApiService: {{titlecase}}ApiService,
      private ngRedux: NgRedux<IAppState>) {}

  initializeApp(): Promise<any> {
    console.log(`initializeApp`);

    console.log("Configure Redux Store");
    this.ngRedux.configureStore(rootReducer, INITIAL_STATE);
    return Promise.all([
      this.{{camelcase}}ApiService.queryItemsAsyncPromise('', this.ngRedux.getState().general.{{camelcase}}Query)
    ])
    .then(_ => console.log("All data loaded"));

  }
}