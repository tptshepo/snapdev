<modal cssClass="modalDelete{{titlecase}}" backdrop="static" #modalDelete{{titlecase}}>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Delete {{title}}
    </h4>
  </modal-header>
  <modal-body>
    <form class="smart-form">
      <fieldset>
        <h1>Are you sure you want to delete row # {{=<% %>=}}{{<%={{ }}=%>selectedRowIndex{{=<% %>=}}}}<%={{ }}=%>?
        </h1>
        <br>
      </fieldset>
    </form>
  </modal-body>
  <modal-footer>
    <div class="modal-spinner" *ngIf="(serverCallsInProgress | async) > 0">
      <app-spinner [size]="40" [tickness]="2" [color]="'#ff1d1d'">
      </app-spinner>
      <span class="modal-spinner-text">Please wait...</span>
    </div>
    <a class="btn btn-default" data-dismiss="modal"> Cancel
    </a>
    <a class="btn btn-danger" (click)="delete{{titlecase}}Commit()"> Delete
    </a>
  </modal-footer>
</modal>

<div class="spinner-panel" *ngIf="(serverCallsInProgress | async) > 0">
  <app-spinner [size]="40" [tickness]="2" [color]="'#ff1d1d'">
  </app-spinner>
  <span class="spinner-text">Please wait...</span>
</div>

<!--
<div class="row">
  <div class="col col-lg-12">
    <div class="row">
      <h2 class="row-seperator-header">
        <i class="fa fa-list">
        </i> {{ptitle}}
      </h2>
    </div>
  </div>
</div>
-->

<div class="well">
  <div class="spinner-panel" *ngIf="(serverCallsInProgress | async) > 0">
    <app-spinner [size]="40" [tickness]="2" [color]="'#ff1d1d'">
    </app-spinner>
  </div>
  <div class="row">
    <div class="col-lg-6">
      <a class="btn btn-primary" (click)="create{{titlecase}}()">
        <i class="fa fa-plus fa-lg">
        </i> Create {{title}}
      </a>
      <a class="btn btn-default" (click)="reload()">
        <i class="fa fa-refresh fa-lg">
        </i> Reload
      </a>
      <a class="btn btn-default" (click)="resetFilter()">
        <i class="fa fa-times-circle-o"></i> Reset Filters</a>
    </div>
    <div class="col-lg-6">
      <div class="pull-right">

      </div>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-lg-12">
      <table class="table table-striped table-hover" width="100%">
        <thead>
          <tr role="row">
            <th></th>
            {{#properties}}
            {{#sortandfilter}}
            <th class="hasinput">
              <input [(ngModel)]="{{rcamelcase}}Query && {{rcamelcase}}Query.{{camelcase}}" (change)="onFilterChange()" type="text" class="form-control"
                placeholder="Filter">
            </th>
            {{/sortandfilter}}
            {{/properties}}
            <th class="hasinput"></th>
          </tr>
          <tr>
            <th *ngFor="let c of columns">
              <div *ngIf="c.isSortable" (click)="sortBy(c.key)">
                {{=<% %>=}}
                {{ c.title }}
                <%={{ }}=%>
                <i *ngIf="{{camelcase}}Query && {{camelcase}}Query.sortBy === c.key" class="fa fa-sort" [class.fa-sort-asc]="{{camelcase}}Query && {{camelcase}}Query.isSortAscending"
                  [class.fa-sort-desc]="{{camelcase}}Query && !{{camelcase}}Query.isSortAscending"></i>
              </div>
              <div *ngIf="!c.isSortable">
                {{=<% %>=}}
                {{ c.title }}
                <%={{ }}=%>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let m of filter{{ptitlecase}} | async; let i = index">
            <td style="width:50px">
              {{=<% %>=}}{{i+1}}<%={{ }}=%>
            </td>
            {{#properties}}
            {{#sortandfilter}}
            {{#stringfilter}}
            <td>
              {{=<% %>=}}{{<%={{ }}=%>m.{{camelcase}}{{=<% %>=}}}}<%={{ }}=%>
            </td>
            {{/stringfilter}}
            {{#datetimefilter}}
            <td>
              {{=<% %>=}}{{<%={{ }}=%>m.{{camelcase}}{{=<% %>=}}}}<%={{ }}=%>
            </td>
            {{/datetimefilter}}
            {{#keyvaluefilter}}
            <td>
              {{=<% %>=}}{{<%={{ }}=%>m.{{camelcase}}.name{{=<% %>=}}}}<%={{ }}=%>
            </td>
            {{/keyvaluefilter}}
            {{#numberfilter}}
            <td>
              {{=<% %>=}}{{<%={{ }}=%>m.{{camelcase}}{{=<% %>=}}}}<%={{ }}=%>
            </td>
            {{/numberfilter}}
            {{#boolfilter}}
            <td>
              <span [ngClass]="m.{{camelcase}} ? 'label label-success' : 'label label-default'">{{=<% %>=}}{{<%={{ }}=%> m.{{camelcase}} | yesno{{=<% %>=}}}}<%={{ }}=%></span>
            </td>
            {{/boolfilter}}
            {{/sortandfilter}}
            {{/properties}}
            <td>
              <a class="btn btn-xs btn-primary" title="Edit record" (click)="edit{{titlecase}}(m)">
                <i class="fa fa-pencil">
                </i>
              </a>
              <a class="btn btn-xs btn-danger" title="Delete record" (click)="delete{{titlecase}}(m, i+1)">
                <i class="fa fa-remove">
                </i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>