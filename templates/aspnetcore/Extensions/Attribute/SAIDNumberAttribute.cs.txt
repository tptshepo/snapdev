using System.ComponentModel.DataAnnotations;

namespace {{package}}.Extensions
{
  public class SAIDNumberAttribute : ValidationAttribute
  {
    public SAIDNumberAttribute()
      : base(() => "The {0} field is not a valid South African ID number.")
    {
    }

    public override bool IsValid(object value)
    {
      string modelValue = (string)value;

      if (!string.IsNullOrEmpty(modelValue))
      {
        SAIdNumber id = new SAIdNumber(modelValue);
        if (!id.IsValid)
          return false;
      }

      return true;
    }

  }
}