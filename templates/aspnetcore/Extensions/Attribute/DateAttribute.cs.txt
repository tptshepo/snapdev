using System;
using System.ComponentModel.DataAnnotations;

namespace {{package}}.Extensions
{
  public class DateAttribute : ValidationAttribute
  {
    public DateAttribute()
      : base(() => "The {0} field is not a valid date.")
    {
    }

    public override bool IsValid(object value)
    {
      string modelValue = Convert.ToString(value);

      if (modelValue == "01/01/0001 00:00:00")
      {
        return false;
      }

      if (!string.IsNullOrEmpty(modelValue))
      {
        //check if valid date
        DateTime d = DateTime.Now;
        bool pass = DateTime.TryParse(modelValue, out d);
        if (!pass)
          return false;
      }

      return true;
    }

  }
}